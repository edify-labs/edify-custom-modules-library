{
  "api": {
    "url": "https://dev-api.edifydev.net/v4/interactions/{{source.interactionId}}",
    "method": "get",
    "headers": {
      "u": "{{edify.user.email}}:{{edify.user.apiToken}}",
      "content-type": "application/json"
    },
    "onResponse": {
      "valueMap": {
        "200": {
          "label": "Success",
          "actions": [
            {
              "label": "Set Variables",
              "action": "set-variables",
              "config": {
                "variables": []
              },
              "editable": true,
              "collapsed": false,
              "supportAddingCustomVariables": true
            }
          ],
          "exitPort": "success",
          "httpCode": "200",
          "collapsed": false
        },
        "any": {
          "label": "Fail",
          "actions": [
            {
              "label": "Set Variables",
              "action": "set-variables",
              "config": {
                "variables": [
                  {
                    "name": "message",
                    "value": "$.message"
                  }
                ]
              },
              "editable": true,
              "collapsed": false,
              "supportAddingCustomVariables": true
            }
          ],
          "exitPort": "fail",
          "httpCode": "any",
          "collapsed": false
        }
      },
      "valueAccessor": "{{http-status-code}}"
    }
  },
  "name": "Get Interaction",
  "sections": [],
  "exitPorts": [
    {
      "name": "success",
      "label": "Success",
      "hoverColor": "#3E5A2C",
      "backgroundColor": "#4F7339"
    },
    {
      "name": "fail",
      "label": "Failed",
      "hoverColor": "#527E36",
      "backgroundColor": "#5D933C"
    }
  ],
  "publisher": {
    "name": "Edify Labs, Inc.",
    "website": "https://edify.cx",
    "description": "Get the current interaction and store the agent's id along with phone number of outside user",
    "licenseType": "Example License"
  },
  "formatting": {
    "titleBar": {
      "icon": "mobile",
      "backgroundColor": "#4F7339"
    }
  },
  "moduleVersion": "1.0",
  "customVariables": [

    {
      "name": "User Id",
      "value": "$.interaction.user.id",
      "defaultValue": "userId"
    },

    {
      "name": "Phone Number",
      "value": "$.interaction.sourceDetails.phoneNumber",
      "defaultValue": "phoneNumber"
    },
    {
      "name": "Email",
      "value": "$.interaction.sourceDetails.email",
      "defaultValue": "email"
    },
    {
      "name": "Communication Type",
      "value": "$.interaction.commType",
      "defaultValue": "commType"
    },
    {
      "name": "Subcommunication Type",
      "value": "$.interaction.subCommType",
      "defaultValue": "subCommType"
    },
    {
      "name": "Status",
      "value": "$.interaction.status",
      "defaultValue": "status"
    },
    {
      "name": "Subject",
      "value": "$.interaction.details.subject",
      "defaultValue": "subject"
    },

    {
      "name": "Language Codes",
      "value": "$.interaction.details.languageCodes",
      "defaultValue": "languageCodes"
    },
    
    {
      "name": "Customer Name",
      "value": "$.interaction.customer.name",
      "defaultValue": "customerName"
    },
    {
      "name": "Customer Email",
      "value": "$.interaction.customer.email",
      "defaultValue": "customerEmail"
    },
    {
      "name": "Customer Phone Number",
      "value": "$.interaction.customer.phoneNumber.number",
      "defaultValue": "customerPhoneNumber"
    },
    {
      "name": "Agent Name",
      "value": "$.interaction.user.fullName",
      "defaultValue": "agentName"
    },
    {
      "name": "Agent Email",
      "value": "$.interaction.user.email",
      "defaultValue": "agentEmail"
    },
    {
      "name": "Agent Time Zone",
      "value": "$.interaction.user.attributes.time.tz",
      "defaultValue": "agentTimeZone"
    },
  
    {
      "name": "Agent Ring Time",
      "value": "$.interaction.user.attributes.userRingTime",
      "defaultValue": "agentRingTime"
    },

    {
      "name": "Agent Reported Score",
      "value": "$.interaction.scores.selfScore",
      "defaultValue": "agentReportedScore"
    },
    {
      "name": "CSAT Score Value",
      "value": "$.interaction.scores.csat.value",
      "defaultValue": "csatScoreValue"
    },
    {
      "name": "CSAT Score Comments",
      "value": "$.interaction.scores.csat.comments",
      "defaultValue": "csatScoreComments"
    },
    {
      "name": "Overall Sentiment",
      "value": "$.interaction.scores.sentiment.overall",
      "defaultValue": "overallSentiment"
    },
    {
      "name": "Agent Sentiment",
      "value": "$.interaction.scores.sentiment.user.sentiment",
      "defaultValue": "agentSentiment"
    },
    {
      "name": "Customer Sentiment",
      "value": "$.interaction.scores.sentiment.customer.sentiment",
      "defaultValue": "customerSentiment"
    },
    {
      "name": "Customer Sentiment Score",
      "value": "$.interaction.scores.sentiment.customer.score",
      "defaultValue": "customerSentimentScore"
    },
    {
      "name": "Start Time",
      "value": "$.interaction.startTime",
      "defaultValue": "startTime"
    },
    {
      "name": "End Time",
      "value": "$.interaction.endTime",
      "defaultValue": "endTime"
    },
    {
      "name": "Age",
      "value": "$.interaction.age",
      "defaultValue": "age"
    },
    {
      "name": "Number Of Transfers",
      "value": "$.interaction.metrics.numberOfTransfers",
      "defaultValue": "numberOfTransfers"
    }, 
    
    {
      "name": "Wait Time",
      "value": "$.interaction.metrics.waitTime",
      "defaultValue": "waitTime"
    }, 
    {
      "name": "Hold Time",
      "value": "$.interaction.metrics.holdTime",
      "defaultValue": "holdTime"
    }, 
    {
      "name": "Time Interacting",
      "value": "$.interaction.metrics.timeInteracting",
      "defaultValue": "timeInteracting"
    },
    {
      "name": "Handle Time",
      "value": "$.interaction.metrics.handleTime",
      "defaultValue": "handleTime"
    }, 
    {
      "name": "Wrap-Up Time",
      "value": "$.interaction.metrics.wrapUpTime",
      "defaultValue": "wrapUpTime"
    }, 
    {
      "name": "Silence Time",
      "value": "$.interaction.metrics.silenceTime",
      "defaultValue": "silenceTime"
    }, 
    {
      "name": "Error Message",
      "value": "$.message",
      "defaultValue": "message"
    }
  ],
  "documentVersion": "1.0"
}